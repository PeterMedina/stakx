#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use allejo\stakx\Application;
use allejo\stakx\Command\BuildCommand;
use Symfony\Component\Console\CommandLoader\FactoryCommandLoader;

$commandLoader = new FactoryCommandLoader([
    'build' => function () { return new BuildCommand(); }
]);

$application = new Application('stakx', '@package_version@');
$application->setCommandLoader($commandLoader);

try
{
    $application->run();
}
catch (\Exception $e)
{
    echo sprintf('An uncaught exception occurred while running %s.', $application->getName());
    echo sprintf('  %s', $e->getMessage());
}
